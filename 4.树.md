# 树

1. 树的抽象结构就是一棵树，子节点、父节点

2. 关键概念

    结点的度Degree  -  一个节点拥有的子节点（子树，注意子节点的子节点数量不算在内，节点a的子节点的子节点就不是节点a的子节点）的数量，比如二叉树的度就是2
    树的度  -  一棵树中，最大的节点的度称为树的度，什么意思呢，就是每一个节点都有其子节点的数量（这些所有数量之中最大的那个数量就是度）
    深度 -  从跟节点往子节点计算，根节点的深度是0，跟节点的子节点的深度是1，根节点的子节点的子节点的深度是2
    高度  -  由最外面的叶子节点开始数，树叶的高度是0，树叶的父节点的高度是1
    阶Order  -  一个节点的子节点数目的最大值，比如二叉树的阶就是2
    关键字  -  每个节点的关键字，你可以认为这个节点是一个存储物理值的变量list，可以存储的关键字就是值
    根节点  -  最顶端的节点
    父节点
    子节点
    结点  -  树中的每个点。（有的书中也成为节点）

    路径：在一棵树中，一个结点到另一个结点之间的通路，称为路径
    路径长度：在一条路径中，每经过一个结点，路径长度都要加 1 
    结点的权：给每一个结点赋予一个新的数值，被称为这个结点的权
    结点的带权路径长度：指的是从根结点到该结点之间的路径长度与该结点的权的乘积

3. 常见的树

    二叉树  - 最多有2个子节点的树
    满二叉树  - 可以认为是那种叶子节点完整的二叉树，也就是叶子结点都是满的，比如一个根节点和2个子节点的二叉树就是满二叉，叶子节点是对称的，换一句话说是 ' 叶节点除外的所有节点均含有两个子树的树被称为满二叉树 '
    完全二叉树  -  如果一颗二叉树除去最后一层节点为满二叉树，且最后一层的结点依次从左到右分布
    二叉查找树  -   比如一个根节点有2个子树，如果左子树所有结点值都小于根节点，右子树所有结点均大于根节点，这种大小有序分布的很方便查找，被称为二叉查找树
    有序树 - 任意节点的子结点之间有顺序关系
    无序树
    霍夫曼树  -  当用 n 个结点试图构建一棵树时，如果构建的这棵树的带权路径长度最小，称这棵树为“最优二叉树”，有时也叫“赫夫曼树”或者“哈夫曼树”

    平衡二叉树  -  1. 是「二叉排序树」2. 任何一个节点的左子树或者右子树都是「平衡二叉树」（左右高度差小于等于 1）


4. 生产环境常见的树

    B树(又称B-树):  一颗m阶B树，每个子结点数量和每个节点内的关键字数量都有一个规则，属于排序二叉树，结点内存值，这是和B+最大的区别

    B+树： B+的结点是不存数据的只做索引的作用，数据只存在叶子节点， B+相邻叶子节点通过链表指针连起来的，B+先找到节点，而B+树则需要通过索引找到叶子结点中的数据才结束

    红黑树 - 特化的二叉查找树，自平衡二叉查找树


5. 面试题

InnoDB一棵B+树可以存放多少行数据：

2000w行

为什么索引结构默认使用B+树，而不是hash，二叉树，红黑树，B-树：

hash适合等值查找 - 可以认为hash是有一个算法将值和地址有一个特殊计算算法，每一个值都可以快速通过这个算法算出来，所以每一个值的时间复杂度都是一样的，虽然可以快速定位，但是没有顺序，不适合范围查找，即使hash查询某一条数据非常快时间复杂度是O(1)

二叉树 - 树的高度不均匀，不能自平衡，查找效率跟数据有关（树的高度），不稳定

红黑 - 是一种特化的平衡二叉树，MySQL 数据量很大的时候，索引的体积也会很大，内存放不下的而从磁盘读取，树的层次太高的话，读取磁盘的次数就多了

B-树 - 因为B树不管叶子节点还是非叶子节点，都会保存数据，这样导致在非叶子节点中能保存的指针数量变少（有些资料也称为扇出），指针少的情况下要保存大量数据，只能增加树的高度，导致IO操作变多，查询性能变低

IO  -  为什么说IO变多呢因为每次磁盘IO读出的数据量是固定的，B树的叶子节点也存储数据无疑变大增加了IO
区间访问  -  第二个就是B+树所有的Data域在叶子节点，一般来说都会进行一个优化，就是将所有的叶子节点用指针串起来，遍历叶子节点就能获得全部数据，这样就能进行区间访问啦，区间访问也是一个优势

B-树和B+树的区别：

数据存放 - B-树内部节点是保存数据的;而B+树内部节点是不保存数据的，只作索引作用，它的叶子节点才保存数据
叶子结点之间关联 - B+树相邻的叶子节点之间是通过链表指针连起来的，B-树却不是，
关键字 - B-树中任何一个关键字出现且只出现在一个结点中，而B+树可以出现多次


5. 参考资料

数据结构教程
http://c.biancheng.net/data_structure/
详解B+
https://zhuanlan.zhihu.com/p/351240279
详解B树
https://blog.csdn.net/weixin_40862011/article/details/85047834
数据结构可视化
https://www.cs.usfca.edu/~galles/visualization/Algorithms.html
索引为啥是B+不默认是B树且不默认是hash
https://blog.csdn.net/weixin_36098377/article/details/108688986
平衡二叉树是撒子
https://blog.csdn.net/jarvan5/article/details/112428036